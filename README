# Serial to WIFI

This project is based on work done by ssanci in the repository https://github.com/salsanci/YRShell.  The primary goals:

1. Provide a mechanism for using YRShell with Platform.io
1. Provide another example of how YRShell can be used on a project
1. Provide a potentially useful project for providing TTL level UARTS over WIFI

# Setup Hardware
This library has been tested on the ESP32.

## ESP32 Defines
* `-DESP32`
* `-DARDUINO_ARCH_ESP32`
* `-DARDUINO_LILYGO_T_DISPLAY_S3`
* `-DF_CPU=240000000L`
* `-DARDUINO_USB_CDC_ON_BOOT=1`

# Setup PC Software
This library is configured for use with platform.io within vscode.

# Todo - Features
* Add NTP Server?
* Test with online server
* Replace WIFI config file with non-volatile preferences
* Add config for upload rates
* Add more temp sensors
* Simplify HTTP server
* Add BLE config to HTTP server
* Add low power mode
* Different sensors?
* Logging with sprintf
* Switch to ESP-IDF

# Timestamps
* ISO 8601 format: YYYY-MM-DDThh:mm:ssZ (e.g., 2026-02-02T14:30:00Z)

# Example HTTP Post Request
```
POST /sensor HTTP/1.1
Host: localhost:9100
Content-Type: application/json
Content-Length: 22

{"v":99,"t":34,"h":56}
```

# Target Storage
* Runtime          - 4 bytes
* Battery Voltage  - 1 byte (90 - 150 in tenths of a volt)
* Battery Current  - 1 byte (-100 - 100 in tenths of an amp)
* State of Charge  - 1 byte (0 - 100 %)
* Inside Temp      - 1 byte (-20 - 100 deg C)
* Inside Humidity  - 1 byte (0 - 100 %)
* Outside Temp     - 1 byte (-20 - 100 deg C)
* Outside Humidity - 1 byte (0 - 100 %)
* Ice Box Temp     - 1 byte (-20 - 100 deg C)
* Ice Box Humidity - 1 byte (0 - 100 %)
* Flags            - 1 byte (0x00 - 0xFF)
* Total = 14 bytes
* Log Interval = 1 minute
* Each day = 14 * 60 * 24 = 20 160 bytes


# Target Behaviour
* Normal Operation
    * Run BLE scan at target interval
    * Collect sensor data
    * Append to log file
    * Repeat
* Quick Check
    * Connect to WIFI access point
    * Access 192.68.10.2 via HTTP
    * Observe current values
* Download Data
    * Connect to WIFI access point
    * Access 192.68.10.2 via HTTP
    * Download stored data file
    * Clear file, restart logging